<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="initial-scale=1,user-scalable=no,width=640" name="viewport">
    <title>CMD fiddle</title>
  </head>
  <body>
    <script id="seajsnode" src="bower_components/seajs/dist/sea.js"></script>
    <script>

      function dump(msg) {
        if ('string' === typeof msg) {
          console.log(msg)
        } else {
          Object.keys(msg).forEach(function each(key) {
            console.log(key + ': ' + msg[key])
          })
        }
      }

      //
      // 事件机制
      //

      seajs.on('config', function onConfig(configuration) {
        console.group('onConfig (调用 seajs.config 时触发)')
        dump(configuration)
        console.groupEnd()
      })

      seajs.on('resolve', function onResolve(resolution) {
        console.group('onResolve (将 id 解析为 uri 时触发)')
        dump(resolution)
        console.groupEnd()
      })

      seajs.on('load', function onLoad(uris) {
        console.group('onLoad (开始加载文件时触发)')
        dump(uris)
        console.groupEnd()
      })

      seajs.on('fetch', function onFetch(module) {
        console.group('onFetch (获取某个具体 uri 时触发)')
        dump(module)
        console.groupEnd()
      })

      seajs.on('request', function onRequest(request) {
        console.group('onRequest (发送请求时触发)')
        dump(request)
        console.groupEnd()
      })

      seajs.on('define', function onDefine(module) {
        console.group('onDefine (执行 define 方法时触发)')
        dump(module)
        console.groupEnd()
      })

      seajs.on('exec', function onExec(module) {
        console.group('onExec (执行 module.factory 方法时触发)')
        dump(module)
        console.groupEnd()
      })


      //
      // 加载（匿名）主模块
      //

      seajs.config({ base: '/scripts' })
      seajs.use('main')


      //
      // 加载具名模块
      //

      define('foobar', 'template')
      seajs.use('foobar')

    </script>
  </body>
</html>
